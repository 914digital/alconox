"use strict";(function(){jQuery(function(d){var a,l=null!=(a=window.wc_avatax_admin)?a:{},i=null!=(a=window.woocommerce_admin)?a:{},c=null!=(a=window.woocommerce_admin_meta_boxes)?a:{},r=null!=(a=window.accounting)?a:{};if(d("input.wc-avatax-connection-field").each(function(a,t){var e="connected"===d(t).data("wc-avatax-connection-status")?"dashicons-yes":"dashicons-no";return d(t).after('<span class="wc-avatax-connection-indicator dashicons"></span>'),d(t).siblings(".wc-avatax-connection-indicator").addClass(e)}),d("input#wc_avatax_enable_tax_calculation, input#wc_avatax_enable_address_validation").change(function(a){var t=d(this).parents("tr").nextAll("tr");return d(this).attr("checked")?d(t).show():d(t).hide()}).change(),d("#wc_avatax_record_calculations").change(function(a){var t=d(this).parents("tr").next("tr");return d(this).attr("checked")?d(t).show():d(t).hide()}).change(),d("select#wc_avatax_tax_locations").change(function(a){d(this).parents("tr").nextAll("tr");return"specific"===d(this).val()?d(this).parent().parent().next("tr").show():d(this).parent().parent().next("tr").hide()}).change(),d("select#wc_avatax_origin_address_country").change(function(a){var t,e=d(this).parents("p").next("p");return"US"===(t=d(this).val())||"CA"===t?d(e).show():d(e).hide()}).change(),d("select#wc_avatax_calculate_on_cart").on("change",function(a){var t=d("#wc_avatax_calculate_on_cart_international_customers").closest("tr");return"yes"===d(this).val()?t.show():t.hide()}).trigger("change"),d("button.wc-avatax-address-validate").on("click",function(a){var t,e,n,i,c,r,s,o;return a.preventDefault(),t=d(this),c=d(t).siblings(".indicator"),n=d(t).parents(".forminp-address"),i=d(n).attr("data-address-id"),r=d(n).find("#"+i+"_address_1").val(),e=d(n).find("#"+i+"_city").val(),o=d(n).find("#"+i+"_state").val(),s=d(n).find("#"+i+"_postcode").val(),a=d(n).find("#"+i+"_country").val(),d(n).find("input, select").prop("disabled",!0),d(t).prop("disabled",!0),c.removeClass(),c.addClass("indicator spinner is-active"),a={line1:r,city:e,region:o,postcode:s,country:a,nonce:l.address_nonce,action:"wc_avatax_validate_origin_address"},jQuery.post(l.ajax_url,a,function(a){if(0!==a)return c.removeClass("spinner is-active"),d(n).find("#message").hide(),200===a.code?(d.each(a.address,function(a,t){return d("#"+i+"_"+a).val(t)}),c.addClass("dashicons dashicons-yes")):d(n).prepend('<div id="message" class="error notice is-dismissible"><p>'+a.error+"</p></div>"),d(n).find("input, select").prop("disabled",!1),d(t).prop("disabled",!1)})}),d("#the-list").on("click",".editinline",function(a){var t,e=d(this).closest("tr").attr("id");return e=e.replace("post-",""),e=(t=d("#wc_avatax_inline_"+e)).find(".tax_code").text(),t=t.find(".hts_code").text(),d('input[name="_wc_avatax_code"]').val(e),d('input[name="_wc_avatax_hts_code"]').val(t)}),d(".wc-avatax-landed-cost-edit-classes").on("click",".wc-avatax-landed-cost-table-add-row",function(a){var t;return a.preventDefault(),(a=(t=d(this).parents("table").find("tbody")).find("tr").last().clone()).find("input").val(""),a.find(".select2").remove(),a.find("select").select2().select2("val","All"),t.append(a),t.find("tr").each(function(n){return d(this).find('[name^="wc_avatax_landed_cost_classes"]').each(function(a,t){var e=d(t).attr("name").replace(/\[.*?\]/,"["+n+"]");return d(t).attr("name",e)})})}),d(".wc-avatax-landed-cost-class-rows").on("click",".wc-avatax-landed-cost-table-remove-row",function(a){var t;return a.preventDefault(),t=d(this).parents("tr"),a=d(this).parents("tbody"),t.remove(),a.find("tr").each(function(n){return d(this).find('[name^="wc_avatax_landed_cost_classes"]').each(function(a,t){var e=d(t).attr("name").replace(/\[.*?\]/,"["+n+"]");return d(t).attr("name",e)})})}),d("#woocommerce-order-items").on("change","input.refund_line_total",function(a){var t=d(this).closest("tr"),e=d(this).val(),n=d(t).find("input.wc_avatax_refund_line_rate").val();return d(t).find('input.refund_line_tax[data-tax_id="avatax"]').val(parseFloat(r.formatNumber(e*n,c.rounding_precision,"")).toString().replace(".",i.mon_decimal_point)).change()}),"yes"===d('#woocommerce-order-items input[name="wc_avatax_calculated"]').val())return d("div.wc-order-refund-items .refund-actions").before('<div class="wc-avatax-refund-warning notice notice-warning">'+l.refund_ays+"</div>")})}).call(void 0);